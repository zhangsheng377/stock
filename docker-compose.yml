version: "2.4"
services:
  save_tushare:
    image: zhangsheng377/stock_base:latest
    restart: always
    volumes:
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    logging:
      options:
        max-size: "10m"
    entrypoint:
      - /bin/bash
      - docker_cmd_save_tushare.sh

  stock:
    image: zhangsheng377/stock_base:latest
    restart: always
    volumes:
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    logging:
      options:
        max-size: "10m"
    entrypoint:
      - /bin/bash
      - docker_cmd.sh

  save_policies:
    image: zhangsheng377/stock_base:latest
    restart: always
    volumes:
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    logging:
      options:
        max-size: "10m"
    entrypoint:
      - /bin/bash
      - docker_cmd_save_policies.sh

  server:
    image: zhangsheng377/stock_base:latest
    restart: always
    volumes:
      - /etc/timezone:/etc/timezone:ro
      - /etc/localtime:/etc/localtime:ro
    ports:
      - "5000:5000"
    logging:
      options:
        max-size: "10m"
    entrypoint:
      - /bin/bash
      - docker_cmd_server.sh
